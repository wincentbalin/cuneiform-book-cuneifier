# Copyright 2019 Wincent Balin
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Discrepancy: Finkel/Taylor use Neo-Assyrian signs for Sumerograms!

import 'byte.grm' as bytelib;

MESZL_10 = "íÄ≠";
MESZL_14 = "íÅÄ";
MESZL_15 = "íç™";
MESZL_16 = "íã¢";
MESZL_24 = "íÖó";
MESZL_85 = "íá∑";
MESZL_86 = "íåÖ";
MESZL_89 = "íÜ∑";
MESZL_98 = "íà¨";
MESZL_99 = "íã°";
MESZL_110 = "íàæ";
MESZL_111 = "íäí";
MESZL_112 = "íâ°";
MESZL_113 = "íÅÅ";
MESZL_118 = "íãæ";
MESZL_127 = "íÄù";
MESZL_132 = "íÑ∑";
MESZL_136 = "íÖÖ";
MESZL_140 = "íç£";
MESZL_141 = "íÑÄ";
MESZL_142 = "íäë";
MESZL_164 = "íÇó";
MESZL_172 = "íäì";
MESZL_181 = "íãõ";
MESZL_223 = "íÄä";
MESZL_238 = "íåù";
MESZL_248 = "íã´";
MESZL_252 = "íÑø";
MESZL_258 = "íÄú";
MESZL_261 = "íÖî";
MESZL_296 = "íäå";
MESZL_297 = "íäç";
MESZL_309 = "íÑ†";
MESZL_313 = "íâà";
MESZL_339 = "íÑ£";
MESZL_348 = "íÖã";
MESZL_350 = "íÅ∫";
MESZL_358 = "íÅâ";
MESZL_380 = "íâå";
MESZL_437 = "íÖï";
MESZL_464 = "íâ∫";
MESZL_469 = "íÑë";
MESZL_474 = "íÄ†";
MESZL_491 = "íÇÖ";
MESZL_498 = "íÇä";
MESZL_501 = "íåß";
MESZL_504 = "íåí";
MESZL_511 = "íäè";
MESZL_552 = "íà†";
MESZL_560 = "íÄâ";
MESZL_561 = "íÅï";
MESZL_580 = "íÅç";
MESZL_583 = "íä∫íÑ∑";
MESZL_589 = "íãº";
MESZL_596 = "íåì";
MESZL_598 = "íâø";
MESZL_631 = "íÑ≠";
MESZL_636 = "íÑ¥";
MESZL_641 = "íÖé";
MESZL_661 = "íåã";
MESZL_681 = "íà™";
MESZL_698 = "íåå";
MESZL_726 = "íÖà";
MESZL_736 = "íÅ≤";
MESZL_737 = "íÜ†";
MESZL_753 = "íà®";
MESZL_807 = "íÖÅ";
MESZL_808 = "íÜ™";
MESZL_812 = "íáª";
MESZL_815 = "íÜ•";
MESZL_828 = "íå®";
MESZL_839 = "íÄÄ";
MESZL_851 = "íçù";
MESZL_856 = "íÑ©";
MESZL_891 = "íÑñ";
MESZL_899 = "íÇñ";

AB = "AB" : MESZL_223;
AD = "AD" : MESZL_258;
AG = "AG" : MESZL_127;
AH = "AH" : MESZL_636;
AK = "AK" : MESZL_127;
AL = "AL" : MESZL_474;
AM = "AM" : MESZL_309;
AN = "AN" : MESZL_10;
AP = "AP" MESZL_223;
AQ = "AQ" : MESZL_127;
AR = "AR" : MESZL_726;
AS = "AS" : MESZL_297;
AT = "AT" : MESZL_258;
AZ = "AZ" : MESZL_297;

BA = "BA" : MESZL_14;
DA = "DA" : MESZL_561;
GA = "GA" : MESZL_491;
HA = "HA" : MESZL_856;
KA = "KA" : MESZL_24;
LA = "LA" : MESZL_89;
MA = "MA" : MESZL_552;
NA = "NA" : MESZL_110;
PA = "PA" : MESZL_464;
QA = "QA" : MESZL_99;
RA = "RA" : MESZL_511;
SA = "SA" : MESZL_172;
TA = "TA" : MESZL_248;
ZA = "ZA" : MESZL_851;

EB = "EB" : MESZL_807;
ED = "ED" : MESZL_560;
EG = "EG" : MESZL_136;
EH = "EH" : MESZL_636;
EK = "EK" : MESZL_136;
EL = "EL" : MESZL_899;
EM = "EM" : MESZL_641;
EN = "EN" : MESZL_164;
EP = "EP" : MESZL_807;
EQ = "EQ" : MESZL_136;
ER = "ER" : MESZL_437;
ES = "ES" : MESZL_469;
ET = "ET" : MESZL_560;
EZ = "EZ" : MESZL_469;

BE = "BE" : MESZL_113;
DE = "DE" : MESZL_736;
GE = "GE" : MESZL_141;
HE = "HE" : MESZL_631;
KE = "KE" : MESZL_737;
LE = "LE" : MESZL_85;
ME = "ME" : MESZL_753;
NE = "NE" : MESZL_313;
PE = "PE" : MESZL_598;
QE = "QE" : MESZL_815;
RE = "RE" : MESZL_142;
SE = "SE" : MESZL_181;
TE = "TE" : MESZL_589;
ZE = "ZE" : MESZL_140;

IB = "IB" : MESZL_807;
ID = "ID" : MESZL_560;
IG = "IG" : MESZL_136;
IH = "IH" : MESZL_636;
IK = "IK" : MESZL_136;
IL = "IL" : MESZL_348;
IM = "IM" : MESZL_641;
IN = "IN" : MESZL_261;
IP = "IP" : MESZL_807;
IQ = "IQ" : MESZL_136;
IR = "IR" : MESZL_437;
IS = "IS" : MESZL_469;
IT = "IT" : MESZL_560;
IZ = "IZ" : MESZL_469;

BI = "BI" : MESZL_358;
DI = "DI" : MESZL_736;
GI = "GI" : MESZL_141;
HI = "HI" : MESZL_631;
KI = "KI" : MESZL_737;
LI = "LI" : MESZL_85;
MI = "MI" : MESZL_681;
NI = "NI" : MESZL_380;
PI = "PI" : MESZL_598;
QI = "QI" : MESZL_815;
RI = "RI" : MESZL_142;
SI = "SI" : MESZL_181;
TI = "TI" : MESZL_118;
ZI = "ZI" : MESZL_140;

UB = "UB" : MESZL_504;
UD = "UD" : MESZL_596;
UG = "UG" : MESZL_296;
UH = "UH" : MESZL_636;
UK = "UK" : MESZL_296;
UL = "UL" : MESZL_698;
UM = "UM" : MESZL_238;
UN = "UN" : MESZL_501;
UP = "UP" : MESZL_504;
UQ = "UQ" : MESZL_296;
UR = "UR" : MESZL_828;
US = "US" : MESZL_583;
UT = "UT" : MESZL_596;
UZ = "UZ" : MESZL_583;

BU = "BU" : MESZL_580;
DU = "DU" : MESZL_350;
GU = "GU" : MESZL_891;
HU = "HU" : MESZL_132;
KU = "KU" : MESZL_808;
LU = "LU" : MESZL_812;
MU = "MU" : MESZL_98;
NU = "NU" : MESZL_112;
PU = "PU" : MESZL_580;
QU = "QU" : MESZL_339;
RU = "RU" : MESZL_111;
SU = "SU" : MESZL_16;
TU = "TU" : MESZL_86;
ZU = "ZU" : MESZL_15;

A = "A" : MESZL_839;
E = "E" : MESZL_498;
I = "I" : MESZL_252;
U = "U" : MESZL_661;

character = Optimize[AB | AD | AG | AH | AK | AL | AM | AN | AP | AQ | AR | AS | AT | AZ |
                      BA | DA | GA | HA | KA | LA | MA | NA | PA | QA | RA | SA | TA | ZA |
                      EB | ED | EG | EH | EK | EL | EM | EN | EP | EQ | ER | ES | ET | EZ |
                      BE | DE | GE | HE | KE | LE | ME | NE | PE | QE | RE | SE | TE | ZE |
                      IB | ID | IG | IH | IK | IL | IM | IN | IP | IQ | IR | IS | IT | IZ |
                      BI | DI | GI | HI | KI | LI | MI | NI | PI | QI | RI | SI | TI | ZI |
                      UB | UD | UG | UH | UK | UL | UM | UN | UP | UQ | UR | US | UT | UZ |
                      BU | DU | GU | HU | KU | LU | MU | NU | PU | QU | RU | SU | TU | ZU |
                      A | E | I | U];

unchanged_input = bytelib.kUpper | " " | "-";
uppercased_input = StringFile['upcase.txt'];
input_chars = (unchanged_input|uppercased_input)+;

word = character (("-" : "") character)*;
text = word (bytelib.kSpace+ word)*;

export Cuneifier = Optimize[input_chars @ text];
export NaiveDecuneifier = Optimize[Invert[text]];


# The inverted characters are transliterations from MesZL
I_AN = MESZL_10 : "AN";
I_BA = MESZL_14 : "BA";
I_ZU = MESZL_15 : "ZU";
I_SU = MESZL_16 : "SU";
I_KA = MESZL_24 : "KA";
I_LI = MESZL_85 : "LI";
I_TU = MESZL_86 : "TU";
I_LA = MESZL_89 : "LA";
I_MU = MESZL_98 : "MU";
I_SILA3 = MESZL_99 : "SILA3";
I_NA = MESZL_110 : "NA";
I_RU = MESZL_111 : "RU";
I_NU = MESZL_112 : "NU";
I_BAD = MESZL_113 : "BAD";
I_TI = MESZL_118 : "TI";
I_AK = MESZL_127 : "AK";
I_HU = MESZL_132 : "HU";
I_IG = MESZL_136 : "IG";
I_ZI = MESZL_140 : "ZI";
I_GI = MESZL_141 : "GI";
I_RI = MESZL_142 : "RI";
I_EN = MESZL_164 : "EN";
I_SA = MESZL_172 : "SA";
I_SI = MESZL_181 : "SI";
I_AB = MESZL_223 : "AB";
I_UM = MESZL_238 : "UM";
I_TA = MESZL_248 : "TA";
I_I = MESZL_252 : "I";
I_AD = MESZL_258 : "AD";
I_IN = MESZL_261 : "IN";
I_UG = MESZL_296 : "UG";
I_AZ = MESZL_297 : "AZ";
I_AM = MESZL_309 : "AM";
I_NE = MESZL_313 : "NE";
I_KUM = MESZL_339 : "KUM";
I_IL = MESZL_348 : "IL";
I_DU = MESZL_350 : "DU";
I_BI = MESZL_358 : "BI";
I_NI = MESZL_380 : "NI";
I_IR = MESZL_437 : "IR";
I_PA = MESZL_464 : "PA";
I_GISH = MESZL_469 : "GISH";
I_AL = MESZL_474 : "AL";
I_GA = MESZL_491 : "GA";
I_E = MESZL_498 : "E";
I_UN = MESZL_501 : "UN";
I_UB = MESZL_504 : "UB";
I_RA = MESZL_511 : "RA";
I_MA = MESZL_552 : "MA";
I_A2 = MESZL_560 : "A2";
I_DE = MESZL_561 : "DA";
I_BU = MESZL_580 : "BU";
I_UZ = MESZL_583 : "UZ";
I_TE = MESZL_589 : "TE";
I_UD = MESZL_596 : "UD";
I_PI = MESZL_598 : "PI";
I_HI = MESZL_631 : "HI";
I_AH = MESZL_636 : "AH";
I_IM = MESZL_641 : "IM";
I_U = MESZL_661 : "U";
I_MI = MESZL_681 : "MI";
I_UL = MESZL_698 : "UL";
I_AR = MESZL_726 : "AR";
I_DI = MESZL_736 : "DI";
I_KI = MESZL_737 : "KI";
I_ME = MESZL_753 : "ME";
I_IB = MESZL_807 : "IB";
I_KU = MESZL_808 : "KU";
I_LU = MESZL_812 : "LU";
I_KIN = MESZL_815 : "KIN";
I_UR = MESZL_828 : "UR";
I_A = MESZL_839 : "A";
I_ZA = MESZL_851 : "ZA";
I_HA = MESZL_856 : "HA";
I_GU = MESZL_891 : "GU";
I_EL = MESZL_899 : "EL";

i_character = Optimize[I_AN | I_BA | I_ZU | I_SU | I_KA | I_LI | I_TU | I_LA |
                       I_MU | I_SILA3 | I_NA | I_RU | I_NU | I_BAD | I_TI | I_AK |
                       I_HU | I_IG | I_ZI | I_GI | I_RI | I_EN | I_SA | I_SI |
                       I_AB | I_UM | I_TA | I_I | I_AD | I_IN | I_UG | I_AZ |
                       I_AM | I_NE | I_KUM | I_IL | I_DU | I_BI | I_NI | I_IR |
                       I_PA | I_GISH | I_AL | I_GA | I_E | I_UN | I_UB | I_RA |
                       I_MA | I_A2 | I_DE | I_BU | I_UZ | I_TE | I_UD | I_PI |
                       I_HI | I_AH | I_IM | I_U | I_MI | I_UL | I_AR | I_DI |
                       I_KI | I_ME | I_IB | I_KU | I_LU | I_KIN | I_UR | I_A |
                       I_ZA | I_HA | I_GU | I_EL];

i_word = i_character (("" : "-") i_character)*;

export Decuneifier = Optimize[i_word (bytelib.kSpace+ i_word)*];
